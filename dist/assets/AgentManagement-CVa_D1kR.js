import{S as e,_ as t,c as n,d as r,f as i,g as a,m as o,n as s,o as c,p as l,r as u,s as d,t as f,u as p,x as m,y as h}from"./index-M0WXdtCa.js";var g={class:`agent-management-container`},_={class:`agent-management-header`},v={class:`agent-list-header`},ee={class:`agent-name-wrapper`},te={class:`stats-container`},y={class:`stat-item`},ne={class:`stat-value`},b={class:`stat-item`},x={class:`stat-value`},S={class:`stat-item`},C={class:`stat-value`},w={class:`stat-item`},T={class:`stat-value`},E={class:`dialog-footer`},re={class:`dialog-footer`},ie={class:`skills-container`},ae={class:`skill-node`},oe={class:`dialog-footer`},se={class:`agent-detail`},D={class:`agent-basic-info`},O={class:`agent-avatar`},k={class:`agent-info`},A={class:`agent-description`},j={class:`agent-meta`},M={class:`agent-skills`},N={class:`agent-params`},P=f(l({__name:`AgentManagement`,setup(e){let l=h([{id:`1`,name:`水预算分析专家`,description:`专注于水资源预算分析的智能体`,type:`water_budget`,template:`water_budget_analysis`,avatar:null,status:`active`,skillCount:5,createTime:`2024-01-15 10:30:00`,updateTime:`2024-03-20 15:45:00`},{id:`2`,name:`水资源规划助手`,description:`协助进行水资源规划的智能体`,type:`water_budget`,template:`water_resource_planning`,avatar:null,status:`active`,skillCount:3,createTime:`2024-02-01 09:15:00`,updateTime:`2024-03-18 14:20:00`},{id:`3`,name:`通用咨询助手`,description:`提供通用咨询服务的智能体`,type:`general`,template:`default`,avatar:null,status:`inactive`,skillCount:2,createTime:`2024-02-10 11:20:00`,updateTime:`2024-03-10 16:30:00`}]),f=h([{id:`skill_001`,name:`水量平衡计算`,description:`计算不同时间尺度下的水量平衡`,type:`calculation`,category:`水预算`,status:`enabled`},{id:`skill_002`,name:`降水趋势分析`,description:`分析历史降水数据的趋势变化`,type:`analysis`,category:`水文学`,status:`enabled`},{id:`skill_003`,name:`径流预测`,description:`基于历史数据预测未来径流变化`,type:`prediction`,category:`水文学`,status:`enabled`},{id:`skill_004`,name:`水资源可视化`,description:`生成水资源数据的可视化图表`,type:`visualization`,category:`数据分析`,status:`enabled`},{id:`skill_005`,name:`蒸发蒸腾计算`,description:`计算不同条件下的蒸发蒸腾量`,type:`calculation`,category:`水文学`,status:`enabled`},{id:`skill_006`,name:`地下水模拟`,description:`模拟地下水流动和水位变化`,type:`prediction`,category:`地下水`,status:`enabled`}]),P=h([{agentId:`1`,skillId:`skill_001`},{agentId:`1`,skillId:`skill_002`},{agentId:`1`,skillId:`skill_003`},{agentId:`1`,skillId:`skill_004`},{agentId:`1`,skillId:`skill_005`},{agentId:`2`,skillId:`skill_001`},{agentId:`2`,skillId:`skill_003`},{agentId:`2`,skillId:`skill_006`},{agentId:`3`,skillId:`skill_004`},{agentId:`3`,skillId:`skill_002`}]),F=h(``),I=h(!1),L=h({name:``,description:``,type:`water_budget`,template:`default`,avatar:null}),R=h([]),z=h(!1),B=h(null),V=h({temperature:.7,contextLength:2e3,responseSpeed:`balanced`,presetTemplate:`balanced`}),H=h(!1),U=h([]),W=h(!1),G=c(()=>{let e={};return f.value.forEach(t=>{e[t.category]||(e[t.category]=[]),e[t.category].push({...t,label:t.name})}),Object.keys(e).map(t=>({id:`category_${t}`,label:t,children:e[t]}))}),K=(e,t)=>{console.log(`技能选择变化:`,e,t)},q=c(()=>B.value?P.value.filter(e=>e.agentId===B.value?.id).map(e=>f.value.find(t=>t.id===e.skillId)||{id:e.skillId,name:`未知技能`,description:``,type:`analysis`,category:``,status:`enabled`}):[]),ce=()=>{if(!B.value)return;P.value=P.value.filter(e=>e.agentId!==B.value?.id),U.value.forEach(e=>{P.value.push({agentId:B.value.id,skillId:e})});let e=l.value.findIndex(e=>e.id===B.value?.id);e!==-1&&(l.value[e].skillCount=U.value.length,l.value[e].updateTime=new Date().toLocaleString()),H.value=!1,u.success(`技能绑定保存成功`)},le=c(()=>F.value?l.value.filter(e=>e.name.includes(F.value)||e.description.includes(F.value)||e.type.includes(F.value)||e.template.includes(F.value)):l.value),ue=c(()=>l.value.length),de=c(()=>l.value.filter(e=>e.status===`active`).length),fe=c(()=>l.value.reduce((e,t)=>e+t.skillCount,0)),pe=c(()=>85),me=()=>{I.value=!0,L.value={name:``,description:``,type:`water_budget`,template:`default`,avatar:null},R.value=[]},he=(e,t)=>{R.value=t},ge=()=>{if(!L.value.name.trim()){u.warning(`请输入智能体名称`);return}let e={id:(l.value.length+1).toString(),name:L.value.name.trim(),description:L.value.description.trim(),type:L.value.type,template:L.value.template,avatar:R.value.length>0&&R.value[0].url||null,status:`active`,skillCount:0,createTime:new Date().toLocaleString(),updateTime:new Date().toLocaleString()};l.value.push(e),I.value=!1,u.success(`智能体创建成功`)},_e=e=>{B.value=e,V.value={temperature:.7,contextLength:2e3,responseSpeed:`balanced`,presetTemplate:`balanced`},W.value=!0},ve=e=>{B.value=e,z.value=!0,V.value={temperature:.7,contextLength:2e3,responseSpeed:`balanced`,presetTemplate:`balanced`}},ye=()=>{console.log(`保存智能体参数:`,B.value,V.value),z.value=!1,u.success(`参数配置保存成功`)},be=e=>{B.value=e,U.value=P.value.filter(t=>t.agentId===e.id).map(e=>e.skillId),H.value=!0},xe=e=>{let t=e.status===`active`?`停用`:`启用`;s.confirm(`确定要${t}智能体"${e.name}"吗？`,`提示`,{confirmButtonText:`确定`,cancelButtonText:`取消`,type:t===`停用`?`warning`:`success`}).then(()=>{let n=l.value.findIndex(t=>t.id===e.id);n!==-1&&(l.value[n].status=e.status===`active`?`inactive`:`active`,l.value[n].updateTime=new Date().toLocaleString(),u.success(`智能体已${t}成功`))}).catch(()=>{})},Se=e=>{s.confirm(`确定要删除智能体"${e.name}"吗？此操作不可恢复！`,`警告`,{confirmButtonText:`确定删除`,cancelButtonText:`取消`,type:`error`}).then(()=>{let t=l.value.findIndex(t=>t.id===e.id);t!==-1&&(l.value.splice(t,1),u.success(`智能体删除成功`))}).catch(()=>{})};return(e,s)=>{let c=a(`el-button`),l=a(`el-input`),u=a(`el-table-column`),f=a(`el-avatar`),h=a(`el-tag`),P=a(`el-table`),J=a(`el-card`),Y=a(`el-form-item`),X=a(`el-option`),Z=a(`el-select`),Ce=a(`el-upload`),Q=a(`el-form`),$=a(`el-dialog`),we=a(`el-slider`),Te=a(`el-input-number`),Ee=a(`el-tree`),De=a(`el-empty`);return o(),p(`div`,g,[d(`div`,_,[s[17]||=d(`h2`,null,`智能体管理`,-1),i(c,{type:`primary`,onClick:me},{default:t(()=>[...s[16]||=[d(`i`,{class:`fas fa-plus`},null,-1),r(` 创建智能体 `,-1)]]),_:1})]),i(J,{class:`agent-list-card`},{header:t(()=>[d(`div`,v,[s[19]||=d(`span`,null,`智能体列表`,-1),i(l,{modelValue:F.value,"onUpdate:modelValue":s[0]||=e=>F.value=e,placeholder:`搜索智能体`,style:{width:`200px`}},{prefix:t(()=>[...s[18]||=[d(`i`,{class:`el-icon-search`},null,-1)]]),_:1},8,[`modelValue`])])]),default:t(()=>[i(P,{data:le.value,style:{width:`100%`}},{default:t(()=>[i(u,{prop:`id`,label:`ID`,width:`80`}),i(u,{prop:`name`,label:`智能体名称`,"min-width":`180`},{default:t(e=>[d(`div`,ee,[i(f,{size:32,src:e.row.avatar||``,icon:e.row.avatar?``:`el-icon-user`},null,8,[`src`,`icon`]),d(`span`,null,m(e.row.name),1),i(h,{type:e.row.status===`active`?`success`:`warning`,size:`small`},{default:t(()=>[r(m(e.row.status===`active`?`活跃`:`停用`),1)]),_:2},1032,[`type`])])]),_:1}),i(u,{prop:`description`,label:`描述`,"min-width":`200`}),i(u,{prop:`type`,label:`类型`,width:`120`},{default:t(e=>[i(h,null,{default:t(()=>[r(m(e.row.type===`water_budget`?`水预算专家`:`通用智能体`),1)]),_:2},1024)]),_:1}),i(u,{prop:`template`,label:`模板`,width:`120`}),i(u,{prop:`skillCount`,label:`技能数`,width:`100`}),i(u,{prop:`createTime`,label:`创建时间`,width:`180`}),i(u,{prop:`updateTime`,label:`更新时间`,width:`180`}),i(u,{label:`操作`,width:`280`,fixed:`right`},{default:t(e=>[i(c,{size:`small`,onClick:t=>_e(e.row)},{default:t(()=>[...s[20]||=[d(`i`,{class:`fas fa-eye`},null,-1),r(` 查看 `,-1)]]),_:1},8,[`onClick`]),i(c,{size:`small`,onClick:t=>ve(e.row)},{default:t(()=>[...s[21]||=[d(`i`,{class:`fas fa-cog`},null,-1),r(` 参数配置 `,-1)]]),_:1},8,[`onClick`]),i(c,{size:`small`,onClick:t=>be(e.row)},{default:t(()=>[...s[22]||=[d(`i`,{class:`fas fa-puzzle-piece`},null,-1),r(` 技能绑定 `,-1)]]),_:1},8,[`onClick`]),i(c,{size:`small`,type:e.row.status===`active`?`warning`:`success`,onClick:t=>xe(e.row)},{default:t(()=>[s[23]||=d(`i`,{class:`fas fa-toggle-on`},null,-1),r(` `+m(e.row.status===`active`?`停用`:`启用`),1)]),_:2},1032,[`type`,`onClick`]),i(c,{size:`small`,type:`danger`,onClick:t=>Se(e.row)},{default:t(()=>[...s[24]||=[d(`i`,{class:`fas fa-trash`},null,-1),r(` 删除 `,-1)]]),_:1},8,[`onClick`])]),_:1})]),_:1},8,[`data`])]),_:1}),i(J,{class:`agent-stats-card`},{header:t(()=>[...s[25]||=[d(`div`,{class:`agent-stats-header`},[d(`span`,null,`智能体统计`)],-1)]]),default:t(()=>[d(`div`,te,[d(`div`,y,[d(`div`,ne,m(ue.value),1),s[26]||=d(`div`,{class:`stat-label`},`智能体总数`,-1)]),d(`div`,b,[d(`div`,x,m(de.value),1),s[27]||=d(`div`,{class:`stat-label`},`活跃智能体`,-1)]),d(`div`,S,[d(`div`,C,m(fe.value),1),s[28]||=d(`div`,{class:`stat-label`},`已绑定技能数`,-1)]),d(`div`,w,[d(`div`,T,m(pe.value),1),s[29]||=d(`div`,{class:`stat-label`},`今日测试次数`,-1)])])]),_:1}),i($,{modelValue:I.value,"onUpdate:modelValue":s[6]||=e=>I.value=e,title:`创建智能体`,width:`600px`},{footer:t(()=>[d(`span`,E,[i(c,{onClick:s[5]||=e=>I.value=!1},{default:t(()=>[...s[32]||=[r(`取消`,-1)]]),_:1}),i(c,{type:`primary`,onClick:ge},{default:t(()=>[...s[33]||=[r(`确定`,-1)]]),_:1})])]),default:t(()=>[i(Q,{model:L.value,"label-width":`80px`},{default:t(()=>[i(Y,{label:`名称`,required:``},{default:t(()=>[i(l,{modelValue:L.value.name,"onUpdate:modelValue":s[1]||=e=>L.value.name=e,placeholder:`请输入智能体名称`},null,8,[`modelValue`])]),_:1}),i(Y,{label:`描述`},{default:t(()=>[i(l,{modelValue:L.value.description,"onUpdate:modelValue":s[2]||=e=>L.value.description=e,type:`textarea`,rows:`3`,placeholder:`请输入智能体描述`},null,8,[`modelValue`])]),_:1}),i(Y,{label:`类型`},{default:t(()=>[i(Z,{modelValue:L.value.type,"onUpdate:modelValue":s[3]||=e=>L.value.type=e,placeholder:`请选择智能体类型`},{default:t(()=>[i(X,{label:`水预算专家`,value:`water_budget`}),i(X,{label:`通用智能体`,value:`general`})]),_:1},8,[`modelValue`])]),_:1}),i(Y,{label:`模板`},{default:t(()=>[i(Z,{modelValue:L.value.template,"onUpdate:modelValue":s[4]||=e=>L.value.template=e,placeholder:`请选择智能体模板`},{default:t(()=>[i(X,{label:`默认模板`,value:`default`}),i(X,{label:`水预算分析模板`,value:`water_budget_analysis`}),i(X,{label:`水资源规划模板`,value:`water_resource_planning`})]),_:1},8,[`modelValue`])]),_:1}),i(Y,{label:`头像`},{default:t(()=>[i(Ce,{action:`#`,"auto-upload":!1,"file-list":R.value,"on-change":he,accept:`image/*`,limit:1},{tip:t(()=>[...s[31]||=[d(`div`,{class:`el-upload__tip`},` 支持JPG、PNG格式，文件不超过2MB `,-1)]]),default:t(()=>[i(c,{size:`small`,type:`primary`},{default:t(()=>[...s[30]||=[r(`上传头像`,-1)]]),_:1})]),_:1},8,[`file-list`])]),_:1})]),_:1},8,[`model`])]),_:1},8,[`modelValue`]),i($,{modelValue:z.value,"onUpdate:modelValue":s[12]||=e=>z.value=e,title:`参数配置 - ${B.value?.name||``}`,width:`500px`},{footer:t(()=>[d(`span`,re,[i(c,{onClick:s[11]||=e=>z.value=!1},{default:t(()=>[...s[34]||=[r(`取消`,-1)]]),_:1}),i(c,{type:`primary`,onClick:ye},{default:t(()=>[...s[35]||=[r(`确定`,-1)]]),_:1})])]),default:t(()=>[i(Q,{model:V.value,"label-width":`120px`},{default:t(()=>[i(Y,{label:`温度参数`},{default:t(()=>[i(we,{modelValue:V.value.temperature,"onUpdate:modelValue":s[7]||=e=>V.value.temperature=e,min:0,max:1,step:.1,"show-input":``},null,8,[`modelValue`])]),_:1}),i(Y,{label:`上下文长度`},{default:t(()=>[i(Te,{modelValue:V.value.contextLength,"onUpdate:modelValue":s[8]||=e=>V.value.contextLength=e,min:100,max:1e4,step:100,style:{width:`100%`}},null,8,[`modelValue`])]),_:1}),i(Y,{label:`响应速度`},{default:t(()=>[i(Z,{modelValue:V.value.responseSpeed,"onUpdate:modelValue":s[9]||=e=>V.value.responseSpeed=e,placeholder:`请选择响应速度`},{default:t(()=>[i(X,{label:`快速`,value:`fast`}),i(X,{label:`均衡`,value:`balanced`}),i(X,{label:`详细`,value:`detailed`})]),_:1},8,[`modelValue`])]),_:1}),i(Y,{label:`预设模板`},{default:t(()=>[i(Z,{modelValue:V.value.presetTemplate,"onUpdate:modelValue":s[10]||=e=>V.value.presetTemplate=e,placeholder:`请选择预设模板`},{default:t(()=>[i(X,{label:`精确型`,value:`precise`}),i(X,{label:`创意型`,value:`creative`}),i(X,{label:`平衡型`,value:`balanced`})]),_:1},8,[`modelValue`])]),_:1})]),_:1},8,[`model`])]),_:1},8,[`modelValue`,`title`]),i($,{modelValue:H.value,"onUpdate:modelValue":s[14]||=e=>H.value=e,title:`技能绑定 - ${B.value?.name||``}`,width:`700px`},{footer:t(()=>[d(`span`,oe,[i(c,{onClick:s[13]||=e=>H.value=!1},{default:t(()=>[...s[36]||=[r(`取消`,-1)]]),_:1}),i(c,{type:`primary`,onClick:ce},{default:t(()=>[...s[37]||=[r(`确定`,-1)]]),_:1})])]),default:t(()=>[d(`div`,ie,[i(Ee,{data:G.value,"show-checkbox":``,"node-key":`id`,"check-strictly":``,"default-checked-keys":U.value,onCheck:K,style:{"max-height":`500px`,"overflow-y":`auto`}},{default:t(({node:e,data:n})=>[d(`div`,ae,[d(`span`,null,m(e.label),1),i(h,{size:`small`,type:n.type===`analysis`?`primary`:n.type===`calculation`?`success`:n.type===`prediction`?`warning`:`info`},{default:t(()=>[r(m(n.type===`analysis`?`分析`:n.type===`calculation`?`计算`:n.type===`prediction`?`预测`:`可视化`),1)]),_:2},1032,[`type`])])]),_:1},8,[`data`,`default-checked-keys`])])]),_:1},8,[`modelValue`,`title`]),i($,{modelValue:W.value,"onUpdate:modelValue":s[15]||=e=>W.value=e,title:`智能体详情 - ${B.value?.name||``}`,width:`800px`},{default:t(()=>[d(`div`,se,[d(`div`,D,[d(`div`,O,[i(f,{size:80,src:B.value?.avatar||``,icon:B.value?.avatar?``:`el-icon-user`},null,8,[`src`,`icon`])]),d(`div`,k,[d(`h3`,null,m(B.value?.name),1),d(`p`,A,m(B.value?.description),1),d(`div`,j,[i(h,{size:`small`},{default:t(()=>[r(m(B.value?.type===`water_budget`?`水预算专家`:`通用智能体`),1)]),_:1}),i(h,{size:`small`},{default:t(()=>[r(`模板：`+m(B.value?.template),1)]),_:1}),i(h,{size:`small`,type:B.value?.status===`active`?`success`:`warning`},{default:t(()=>[r(m(B.value?.status===`active`?`活跃`:`停用`),1)]),_:1},8,[`type`]),i(h,{size:`small`},{default:t(()=>[r(`创建时间：`+m(B.value?.createTime),1)]),_:1}),i(h,{size:`small`},{default:t(()=>[r(`更新时间：`+m(B.value?.updateTime),1)]),_:1})])])]),d(`div`,M,[s[38]||=d(`h4`,null,`已绑定技能`,-1),q.value.length>0?(o(),n(P,{key:0,data:q.value,style:{width:`100%`}},{default:t(()=>[i(u,{prop:`name`,label:`技能名称`,"min-width":`150`}),i(u,{prop:`description`,label:`描述`,"min-width":`250`}),i(u,{prop:`type`,label:`类型`,width:`120`},{default:t(e=>[i(h,{size:`small`,type:e.row.type===`analysis`?`primary`:e.row.type===`calculation`?`success`:e.row.type===`prediction`?`warning`:`info`},{default:t(()=>[r(m(e.row.type===`analysis`?`分析`:e.row.type===`calculation`?`计算`:e.row.type===`prediction`?`预测`:`可视化`),1)]),_:2},1032,[`type`])]),_:1}),i(u,{prop:`category`,label:`分类`,width:`120`})]),_:1},8,[`data`])):(o(),n(De,{key:1,description:`暂无绑定技能`}))]),d(`div`,N,[s[39]||=d(`h4`,null,`智能体参数`,-1),i(Q,{model:V.value,"label-width":`120px`,inline:``},{default:t(()=>[i(Y,{label:`温度参数`},{default:t(()=>[i(h,{size:`small`},{default:t(()=>[r(m(V.value.temperature),1)]),_:1})]),_:1}),i(Y,{label:`上下文长度`},{default:t(()=>[i(h,{size:`small`},{default:t(()=>[r(m(V.value.contextLength),1)]),_:1})]),_:1}),i(Y,{label:`响应速度`},{default:t(()=>[i(h,{size:`small`},{default:t(()=>[r(m(V.value.responseSpeed===`fast`?`快速`:V.value.responseSpeed===`balanced`?`均衡`:`详细`),1)]),_:1})]),_:1}),i(Y,{label:`预设模板`},{default:t(()=>[i(h,{size:`small`},{default:t(()=>[r(m(V.value.presetTemplate),1)]),_:1})]),_:1})]),_:1},8,[`model`])])])]),_:1},8,[`modelValue`,`title`])])}}}),[[`__scopeId`,`data-v-81d90d08`]]);export{P as default};